<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>山东大学软件学院数据库系统概念实验答案（2022） | 滚圆的小橘子的博客</title><meta name="author" content="滚圆的小橘子"><meta name="copyright" content="滚圆的小橘子"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="本文只记录个人各个题目对应执行哪些SQL，不作解释。未经允许而直接抄袭的行为是严格禁止的，违者后果自负。  实验一 创建学生信息表（学生编号、姓名、性别、年龄、出生日期、院系名称、班级）：test1_student：sid char 12 not null、name varchar 10 not null、sex char 2、age int、birthday date、dname varchar">
<meta property="og:type" content="article">
<meta property="og:title" content="山东大学软件学院数据库系统概念实验答案（2022）">
<meta property="og:url" content="http://roundedorange.top/cf5716c0.html">
<meta property="og:site_name" content="滚圆的小橘子的博客">
<meta property="og:description" content="本文只记录个人各个题目对应执行哪些SQL，不作解释。未经允许而直接抄袭的行为是严格禁止的，违者后果自负。  实验一 创建学生信息表（学生编号、姓名、性别、年龄、出生日期、院系名称、班级）：test1_student：sid char 12 not null、name varchar 10 not null、sex char 2、age int、birthday date、dname varchar">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg">
<meta property="article:published_time" content="2022-03-29T00:00:00.000Z">
<meta property="article:modified_time" content="2023-04-06T15:14:06.147Z">
<meta property="article:author" content="滚圆的小橘子">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg"><link rel="shortcut icon" href="/pictures/favicon.png"><link rel="canonical" href="http://roundedorange.top/cf5716c0"><link rel="preconnect" href="//fastly.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: {"limitDay":200,"position":"top","messagePrev":"离本文章最近更新已有","messageNext":"天，文章内容可能已过时。"},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":200},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 滚圆的小橘子","link":"链接: ","source":"来源: 滚圆的小橘子的博客","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  source: {
    jQuery: 'https://fastly.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://fastly.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://fastly.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '山东大学软件学院数据库系统概念实验答案（2022）',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-04-06 15:14:06'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const fontSizeVal = saveToLocal.get('global-font-size')
    if (fontSizeVal !== undefined) {
      document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
    }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"><link rel="stylesheet" href="/css/copyright.css"><link rel="stylesheet" href="/css/custom/twikoo_beautify.css"  media="defer" onload="this.media='all'"><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiperstyle.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/font-awesome-animation.min.css" media="defer" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/tag_plugins.css" media="defer" onload="this.media='all'"><script src="https://npm.elemecdn.com/hexo-butterfly-tag-plugins-plus@latest/lib/assets/carousel-touch.js"></script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 5.4.2"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/pictures/avatar.jpg" onerror="onerror=null;src='/pictures/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">32</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">8</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/kagamine/"><i class="fa-fw fas fa-heart"></i><span> 镜音的小窝</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/4806bed7.html"><i class="fa-fw fas fa-user-circle"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" onclick="btf.scrollToDest(0, 500)" data-title="嘿咻~">山东大学软件学院数据库系统概念实验答案（2022）</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/kagamine/"><i class="fa-fw fas fa-heart"></i><span> 镜音的小窝</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-comment"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/4806bed7.html"><i class="fa-fw fas fa-user-circle"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">山东大学软件学院数据库系统概念实验答案（2022）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-29T00:00:00.000Z" title="发表于 2022-03-29 00:00:00">2022-03-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2023-04-06T15:14:06.147Z" title="更新于 2023-04-06 15:14:06">2023-04-06</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>39分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="山东大学软件学院数据库系统概念实验答案（2022）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><div class="note blue icon flat"><i class="note-icon fas fa-bullhorn"></i><p>本文只记录个人各个题目对应执行哪些SQL，不作解释。未经允许而直接抄袭的行为是严格禁止的，违者后果自负。</p>
</div>
<h1 id="实验一"><a href="#实验一" class="headerlink" title="实验一"></a>实验一</h1><ol>
<li>创建学生信息表（学生编号、姓名、性别、年龄、出生日期、院系名称、班级）：test1_student：sid char 12 not null、name varchar 10 not null、sex char 2、age int、birthday date、dname varchar 30、class varchar 10。建表语句常见错误如下：关键词拼写错误，少关键词、少逗号、少括号。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test1_student</span><br><span class="line">(</span><br><span class="line">    sid <span class="type">char</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    birthday <span class="type">date</span>,</span><br><span class="line">    dname <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">10</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>创建课程信息表(仅考虑一门课程最多一个先行课的情况):课程编号、课程名称、先行课编号、学分test1_course：cid char 6 not null、name varchar 40 not null、fcid char 6、credit numeric 4，1（其中4代表总长度，1代表小数点后面长度）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test1_course</span><br><span class="line">(</span><br><span class="line">    cid <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    fcid <span class="type">char</span>(<span class="number">6</span>),</span><br><span class="line">    credit <span class="type">numeric</span>(<span class="number">4</span>,<span class="number">1</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>创建学生选课信息表（学号、课程号、成绩、教师编号、选课时间）test1_student_course：sid char 12 not null、cid char 6 not null、score numeric 5，1（其中5代表总长度，1代表小数点后面长度）、tid char 6, sctime date<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test1_student_course</span><br><span class="line">(</span><br><span class="line">    sid <span class="type">char</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    cid <span class="type">char</span>(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    score <span class="type">numeric</span>(<span class="number">5</span>,<span class="number">1</span>),</span><br><span class="line">    tid <span class="type">char</span>(<span class="number">6</span>),</span><br><span class="line">    sctime <span class="type">date</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>给表test1_student插入如下2行数据。<br>学号 姓名 性别 年龄 出生日期 院系名称 班级<br>201800020101 王欣 女 21 1994-02-02 计算机学院 2010<br>201800020102 李华 女 20 1995-03-03 软件学院    2009<br>特别提醒：<br>1、插入语句有严格语法格式，一次只能插入一行数据，不要自创语法格式。<br>2、引号一定也采用英文单引号。<br>3、输入日期类型数据的格式：<br>insert into t1 values(200700030101,’赵中华’,’男’,19,to_date(‘20120202’,’yyyymmdd’),’计算机学院’,’2010’)  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test1_student <span class="keyword">VALUES</span>(<span class="number">201800020101</span>,<span class="string">&#x27;王欣&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">21</span>,to_date(<span class="string">&#x27;19940202&#x27;</span>,<span class="string">&#x27;yyyymmdd&#x27;</span>),<span class="string">&#x27;计算机学院&#x27;</span>,<span class="string">&#x27;2010&#x27;</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test1_student <span class="keyword">VALUES</span>(<span class="number">201800020102</span>,<span class="string">&#x27;李华&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">20</span>,to_date(<span class="string">&#x27;19950303&#x27;</span>,<span class="string">&#x27;yyyymmdd&#x27;</span>),<span class="string">&#x27;软件学院&#x27;</span>,<span class="string">&#x27;2009&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>给表test1_course插入如下2行数据。<br>课程号  课程名       先行课程号 学分<br>800001 数据结构                          2<br>800002 数据库      800001         2.5<br>特别提醒：<br>1、插入空值使用null<br>2、一次只能插入一行数据  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test1_course <span class="keyword">VALUES</span>(<span class="number">800001</span>,<span class="string">&#x27;数据结构&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>)</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test1_course <span class="keyword">VALUES</span>(<span class="number">800002</span>,<span class="string">&#x27;数据库&#x27;</span>,<span class="number">800001</span>,<span class="number">2.5</span>)</span><br></pre></td></tr></table></figure></li>
<li>给表test1_student_course插入如下2行数据。<br>学号 课程号 成绩 教师编号 选课时间<br>201800020101 300001 91.5 200101 2009-07-15 09:09:09<br>201800020101 300002 92.6 200102 2009-07-15 10:10:10<br>特别提醒：<br>1、一次只能插入一行数据<br>2、日期时间输入函数 to_date(‘2020-01-03 15-26-26’,’yyyy-mm-dd hh24-mi-ss’)  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test1_student_course <span class="keyword">VALUES</span>(<span class="number">201800020101</span>,<span class="number">300001</span>,<span class="number">91.5</span>,<span class="number">200101</span>,to_date(<span class="string">&#x27;2009-07-15 09:09:09&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd hh24-mi-ss&#x27;</span>))</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test1_student_course <span class="keyword">VALUES</span>(<span class="number">201800020101</span>,<span class="number">300002</span>,<span class="number">92.6</span>,<span class="number">200102</span>,to_date(<span class="string">&#x27;2009-07-15 10:10:10&#x27;</span>,<span class="string">&#x27;yyyy-mm-dd hh24-mi-ss&#x27;</span>))</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验二"><a href="#实验二" class="headerlink" title="实验二"></a>实验二</h1><ol>
<li>找出没有选修任何课程的学生的学号、姓名(即没有选课记录的学生）。<br>自己认为查询语句正确后，通过下面语句将查询语句创建成视图test2_01<br>Create or replace view test2_01 as select ……<br>然后就可以点击实验二的题目1的【交卷验证】，验证正确性，正确后就有得分。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_01 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span> (  <span class="keyword">SELECT</span> sid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                 )</span><br></pre></td></tr></table></figure></li>
<li>找出至少选修了学号为“200900130417”的学生所选修的一门课的学生的学号、姓名(不包含这名同学)。<br>自己认为查询语句正确后，通过下面语句将查询语句创建成视图test2_02<br>Create or replace view test2_02 as select ……<br>然后就可以点击实验二的题目2的【交卷验证】，验证正确性，正确后就有得分。<br>以下各题操作类似。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_02 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student </span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">IN</span> (  <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                <span class="keyword">WHERE</span> cid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                                <span class="keyword">WHERE</span> sid<span class="operator">=</span><span class="number">200900130417</span></span><br><span class="line">                            )</span><br><span class="line">             )</span><br><span class="line">             MINUS</span><br><span class="line">             (  <span class="keyword">SELECT</span> sid,name</span><br><span class="line">                <span class="keyword">FROM</span> pub.student</span><br><span class="line">                <span class="keyword">WHERE</span> sid<span class="operator">=</span><span class="number">200900130417</span></span><br><span class="line">             )</span><br></pre></td></tr></table></figure></li>
<li>找出至少选修了一门其先行课程号为”300002”号课程的学生的学号、姓名。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_03 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                <span class="keyword">WHERE</span> cid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                                <span class="keyword">FROM</span> pub.course</span><br><span class="line">                                <span class="keyword">WHERE</span> fcid<span class="operator">=</span><span class="number">300002</span></span><br><span class="line">                            )</span><br><span class="line">            )</span><br></pre></td></tr></table></figure></li>
<li>找出选修了“操作系统”并且也选修了“数据结构”，但是没有选修“程序设计语言”的学生的学号、姓名。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_04 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                <span class="keyword">WHERE</span> cid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                                <span class="keyword">FROM</span> pub.course</span><br><span class="line">                                <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">&#x27;操作系统&#x27;</span></span><br><span class="line">                            )</span><br><span class="line">            )</span><br><span class="line">    <span class="keyword">AND</span> sid <span class="keyword">IN</span>( <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                <span class="keyword">WHERE</span> cid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                                <span class="keyword">FROM</span> pub.course</span><br><span class="line">                                <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">&#x27;数据结构&#x27;</span></span><br><span class="line">                            )</span><br><span class="line">              )</span><br><span class="line">    <span class="keyword">AND</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span>( <span class="keyword">SELECT</span> sid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                    <span class="keyword">WHERE</span> cid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                                    <span class="keyword">FROM</span> pub.course</span><br><span class="line">                                    <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">&#x27;程序设计语言&#x27;</span></span><br><span class="line">                                )</span><br><span class="line">                  )</span><br></pre></td></tr></table></figure></li>
<li>查询20岁的所有有选课的学生的学号、姓名、平均成绩(avg_score，此为列名，下同)（平均成绩四舍五入到个位）、总成绩(sum_score)<br>Test2_05有四个列，并且列名必须是：sid、name、avg_score、sum_score。通过下面方式实现列名定义：<br>create or replace view test2_05 as select sid,name，（表达式） avg_score,（表达式） sum_score  from ……<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_05 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,(round(<span class="built_in">avg</span>(score),<span class="number">0</span>)) avg_score,(<span class="built_in">sum</span>(score)) sum_score</span><br><span class="line"><span class="keyword">FROM</span> pub.student <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.student_course</span><br><span class="line"><span class="keyword">WHERE</span> age<span class="operator">=</span><span class="number">20</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,name</span><br></pre></td></tr></table></figure></li>
<li>查询所有课的最高成绩、最高成绩人数，test2_06有四个列：课程号cid、课程名称name、最高成绩max_score、最高成绩人数max_score_count（一个学生同一门课成绩都是第一，只计一次,需要考虑刷成绩情况，一个同学选了一个课程多次，两次都是最高分。如果结果错一行，可能就是没有考虑这种情况，这里是为了考核”去重复计数”知识点的）。如果没有学生选课，则最高成绩为空值,最高成绩人数为零。<br>提示：参考讲义关于标量子查询（只返回包含单个属性的单个元组）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_06 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> cid,name,max_score,max_score_count</span><br><span class="line"><span class="keyword">FROM</span>(   (   <span class="keyword">SELECT</span> cid,(<span class="built_in">max</span>(score))max_score</span><br><span class="line">            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> cid</span><br><span class="line">        ) a</span><br><span class="line">        <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">        (   <span class="keyword">SELECT</span> cid,name</span><br><span class="line">            <span class="keyword">FROM</span> pub.course</span><br><span class="line">        ) b</span><br><span class="line">        <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">        (   <span class="keyword">SELECT</span> cid,<span class="built_in">count</span>(<span class="keyword">DISTINCT</span> sid) max_score_count</span><br><span class="line">            <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> d.cid,d.sid</span><br><span class="line">                    <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> cid,sid,score</span><br><span class="line">                            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                        ) d</span><br><span class="line">                        <span class="keyword">INNER</span> <span class="keyword">JOIN</span></span><br><span class="line">                        (   <span class="keyword">SELECT</span> cid,(<span class="built_in">max</span>(score))max_score</span><br><span class="line">                            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                            <span class="keyword">GROUP</span> <span class="keyword">BY</span> cid</span><br><span class="line">                        ) a</span><br><span class="line">                        <span class="keyword">ON</span> d.cid<span class="operator">=</span>a.cid</span><br><span class="line">                    <span class="keyword">WHERE</span> score<span class="operator">=</span>max_score</span><br><span class="line">                )</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> cid</span><br><span class="line">        ) c</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></li>
<li>查询所有不姓张、不姓李、也不姓王的学生的学号sid、姓名name<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_07 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> name <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;张%&#x27;</span> <span class="keyword">AND</span> name <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;李%&#x27;</span> <span class="keyword">AND</span> name <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;王%&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>查询学生表中每一个姓氏及其人数（不考虑复姓），test2_08有两个列：second_name、p_count<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_08 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> (substr(name,<span class="number">1</span>,<span class="number">1</span>)) second_name,(<span class="built_in">count</span>(<span class="operator">*</span>)) p_count</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> substr(name,<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure></li>
<li>查询选修了300003号课程的学生的sid、name、score<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_09 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,score</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,name</span><br><span class="line">        <span class="keyword">FROM</span> pub.student</span><br><span class="line">    )</span><br><span class="line">    <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">    (   <span class="keyword">SELECT</span> sid,score</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">        <span class="keyword">WHERE</span> cid<span class="operator">=</span><span class="number">300003</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure></li>
<li>找出同一个同学同一门课程有两次或以上不及格的所有学生的学号、姓名（即一门课程需要补考两次或以上的学生的学号、姓名）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test2_10 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student </span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,cid,<span class="built_in">count</span>(<span class="operator">*</span>) count</span><br><span class="line">                        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                        <span class="keyword">WHERE</span> score<span class="operator">&lt;</span><span class="number">60</span></span><br><span class="line">                        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid</span><br><span class="line">                    )</span><br><span class="line">                <span class="keyword">WHERE</span> count<span class="operator">&gt;=</span><span class="number">2</span></span><br><span class="line">                <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid</span><br><span class="line">            )</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验三"><a href="#实验三" class="headerlink" title="实验三"></a>实验三</h1><ol>
<li>将pub用户下的Student_31及数据复制到主用户的表test3_01，删除表中的学号不全是数字的那些错误数据，学号应该是数字组成，不能够包含字母空格等非数字字符。<br>方法之一：用substr函数，例如Substr(sid,1,1)返回学号的第一位，判断是否是数字。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_01 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_31</span><br><span class="line"><span class="keyword">WHERE</span> regexp_like(sid,<span class="string">&#x27;[[:digit:]]&#123;12&#125;&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_31及数据复制到主用户的表test3_02，删除表中的出生日期和年龄(截止到2012年的年龄，即年龄=2012-出生年份)不一致的那些错误数据。<br>函数extract(year from birthday)返回birthday的年份<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_02 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_31</span><br><span class="line"><span class="keyword">WHERE</span> age<span class="operator">=</span><span class="number">2012</span><span class="operator">-</span><span class="built_in">extract</span>(<span class="keyword">year</span> <span class="keyword">FROM</span> birthday)</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_31及数据复制到主用户的表test3_03，删除表中的性别有错误的那些错误数据（性别只能够是”男”、”女”或者空值）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_03 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_31</span><br><span class="line"><span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span> <span class="keyword">OR</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">OR</span> sex <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_31及数据复制到主用户的表test3_04，删除表中的院系名称有空格的、院系名称为空值的或者院系名称小于3个字的那些错误数据。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_04 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_31</span><br><span class="line"><span class="keyword">WHERE</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">AND</span> dname <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;% %&#x27;</span> <span class="keyword">AND</span> length(dname)<span class="operator">&gt;=</span><span class="number">3</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_31及数据复制到主用户的表test3_05，删除表中的班级不规范的那些错误数据，不规范是指和大多数不一致。<br>这个题知识点是学会用sql找出不规范的数据，而不是用人工办法找不规范。<br>提示：寻找不规范有很多解决思路，可以去对比大纲最后的提示。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_05 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_31</span><br><span class="line"><span class="keyword">WHERE</span> class <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;% %&#x27;</span> <span class="keyword">and</span> class <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;%级%&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_31及数据复制到主用户的表test3_06，删除表中的错误数据，不规范的数据也被认为是那些错误数据。<br> （1）学号不全是数字；<br> （2）出生日期和年龄不一致的(年龄=2012-出生年份)；<br> （3）姓名有空格的或者长度小于2个字的；函数length()返回字符串长度。<br> （4）性别有错误的（只能够是”男”、”女”、空值）；<br> （5）院系名称有空格的、院系名称为空值的；<br> （6）院系名称小于3个字的；<br> （7）班级数据有错误的（需要先找到班级里面的错误）。<br>保留最后全部正确的数据。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_06 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_31</span><br><span class="line"><span class="keyword">WHERE</span> regexp_like(sid,<span class="string">&#x27;[[:digit:]]&#123;12&#125;&#x27;</span>)</span><br><span class="line">    <span class="keyword">AND</span> age<span class="operator">=</span><span class="number">2012</span><span class="operator">-</span><span class="built_in">extract</span>(<span class="keyword">year</span> <span class="keyword">from</span> birthday)</span><br><span class="line">    <span class="keyword">AND</span> name <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;% %&#x27;</span> <span class="keyword">AND</span> length(name)<span class="operator">&gt;=</span><span class="number">2</span></span><br><span class="line">    <span class="keyword">AND</span> (sex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span> <span class="keyword">OR</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">OR</span> sex <span class="keyword">is</span> <span class="keyword">NULL</span>)</span><br><span class="line">    <span class="keyword">AND</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">AND</span> dname <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;% %&#x27;</span> <span class="keyword">AND</span> length(dname)<span class="operator">&gt;=</span><span class="number">3</span></span><br><span class="line">    <span class="keyword">AND</span> class <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;% %&#x27;</span> <span class="keyword">and</span> class <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;%级%&#x27;</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_course_32及数据复制到主用户的表test3_07，删除其中的错误数据，错误指如下情况：<br>学号在学生信息pub.student中不存在的；<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_07 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_course_32</span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span> pub.Student</span><br><span class="line">            )</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_course_32及数据复制到主用户的表test3_08，删除其中的错误数据，错误指如下情况：<br>课程号和教师编号在教师授课表pub.teacher_course中不同时存在的，即没有该教师教该课程；<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_08 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> a.<span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> pub.Student_course_32 a,pub.teacher_course b</span><br><span class="line"><span class="keyword">WHERE</span> a.tid<span class="operator">=</span>b.tid <span class="keyword">AND</span> a.cid<span class="operator">=</span>b.cid</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_course_32及数据复制到主用户的表test3_09，删除其中的错误数据，错误指如下情况：<br>成绩数据有错误（需要先找到成绩里面的错误）。<br>这个题知识点是学会用sql找出错误数据，而不是用人工办法找错误数据。<br>提示：寻找不规范有很多解决思路，可以去对比大纲最后的提示。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_09 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_course_32</span><br><span class="line"><span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">0</span> <span class="keyword">AND</span> score<span class="operator">&lt;=</span><span class="number">100</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_course_32及数据复制到主用户的表test3_10，删除其中的错误数据，错误指如下情况：<br>（1） 学号在学生信息pub.student中不存在的；<br>（2） 课程号在课程信息pub.course中不存在的；<br>（3） 教师编号在教师信息pub.teacher中不存在的；<br>（4） 课程号和教师编号在教师授课表pub.teacher_course中不存在的；<br>（5） 成绩数据有错误（需要先找到成绩里面的错误）。<br>保留最后正确的数据。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test3_10 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pub.Student_course_32</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test3_10</span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> sid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test3_10</span><br><span class="line"><span class="keyword">WHERE</span> tid <span class="keyword">NOT</span> <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> tid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.teacher</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test3_10</span><br><span class="line"><span class="keyword">WHERE</span> cid <span class="keyword">NOT</span> <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.course</span><br><span class="line">                )</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test3_10</span><br><span class="line"><span class="keyword">WHERE</span> (tid,cid) <span class="keyword">NOT</span> <span class="keyword">IN</span>( <span class="keyword">SELECT</span> tid,cid</span><br><span class="line">                        <span class="keyword">FROM</span> pub.teacher_course</span><br><span class="line">                      )</span><br><span class="line"></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> test3_10</span><br><span class="line"><span class="keyword">WHERE</span> score <span class="keyword">NOT</span> <span class="keyword">BETWEEN</span> <span class="number">0</span> <span class="keyword">AND</span> <span class="number">100</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验四"><a href="#实验四" class="headerlink" title="实验四"></a>实验四</h1><ol>
<li>将pub用户下表student_41及数据复制到主用户的表test4_01中，使用alter table语句为表增加列：”总成绩:sum_score”。<br>使用update语句,利用pub.student_course、pub.course，统计 “总成绩”；<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_01 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> pub.student_41</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test4_01 <span class="keyword">ADD</span> sum_score <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_01</span><br><span class="line"><span class="keyword">SET</span> sum_score<span class="operator">=</span>( <span class="keyword">SELECT</span> <span class="built_in">sum</span>(score)</span><br><span class="line">                <span class="keyword">FROM</span> pub.student_course a</span><br><span class="line">                <span class="keyword">WHERE</span> a.sid<span class="operator">=</span>test4_01.sid</span><br><span class="line">              )</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下表student_41及数据复制到主用户的表test4_02中，使用alter table语句为表增加列”平均成绩:avg_score” （小数点后保留1位）。<br>利用pub.student_course、pub.course，统计”平均成绩”，四舍五入到小数点后1位<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_02 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span></span><br><span class="line">pub.student_41</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test4_02</span><br><span class="line"><span class="keyword">ADD</span> avg_score <span class="type">numeric</span>(<span class="number">3</span>,<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_02</span><br><span class="line"><span class="keyword">SET</span> avg_score<span class="operator">=</span>( <span class="keyword">SELECT</span> <span class="built_in">avg</span>(score)</span><br><span class="line">                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                <span class="keyword">WHERE</span> test4_02.sid<span class="operator">=</span>pub.student_course.sid</span><br><span class="line">              )</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下表student_41及数据复制到主用户的表test4_03中，使用alter table语句为表增加列：”总学分:sum_credit”。<br>使用update语句,利用pub.student_course、pub.course，统计 “总学分”；<br>这是需要注意：成绩及格才能够计算所得学分。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_03 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> pub.student_41</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test4_03</span><br><span class="line"><span class="keyword">ADD</span> sum_credit <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_03</span><br><span class="line"><span class="keyword">SET</span> sum_credit<span class="operator">=</span>(    <span class="keyword">SELECT</span> <span class="built_in">sum</span>(credit)</span><br><span class="line">                    <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,cid,<span class="built_in">max</span>(score),credit</span><br><span class="line">                            <span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.course</span><br><span class="line">                            <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid,credit</span><br><span class="line">                            <span class="keyword">HAVING</span> <span class="built_in">max</span>(score)<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">                        ) a</span><br><span class="line">                    <span class="keyword">WHERE</span> test4_03.sid<span class="operator">=</span>a.sid</span><br><span class="line">               )</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下表student_41及数据复制到主用户的表test4_04中。<br>根据列院系名称dname到pub.department找到对应院系编号did，将对应的院系编号回填到院系名称列dname中，如果表中没有对应的院系名称，则列dname中内容不变仍然是原来的内容。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_04 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pub.student_41</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_04</span><br><span class="line"><span class="keyword">SET</span> dname<span class="operator">=</span>( <span class="keyword">SELECT</span> did</span><br><span class="line">            <span class="keyword">FROM</span> pub.department</span><br><span class="line">            <span class="keyword">WHERE</span> test4_04.dname<span class="operator">=</span>pub.department.dname</span><br><span class="line">          )</span><br><span class="line"><span class="keyword">WHERE</span> test4_04.dname <span class="keyword">IN</span>(    <span class="keyword">SELECT</span> dname</span><br><span class="line">                            <span class="keyword">FROM</span> pub.department</span><br><span class="line">                       )</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下表student_41及数据复制到主用户的表test4_05中，使用alter table语句为表增加4个列：”总成绩:sum_score”、 “平均成绩:avg_score”、”总学分:sum_credit”、”院系编号:did varchar(2) “。<br>（1） 利用pub.student_course、pub.course，统计 “总成绩”；<br>（2） 利用pub.student_course、pub.course，统计”平均成绩”，四舍五入到小数点后1位；<br>（3） 利用pub.student_course、pub.course，统计 “总学分”；<br>（4） 根据院系名称到pub.department和pub.department_41中，找到对应编号，填写到院系编号中，如果都没有对应的院系，则填写为00。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_05 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> pub.student_41</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test4_05</span><br><span class="line"><span class="keyword">ADD</span> (sum_score <span class="type">int</span>,</span><br><span class="line">avg_score <span class="type">numeric</span>(<span class="number">3</span>,<span class="number">1</span>),</span><br><span class="line">sum_credit <span class="type">int</span>,</span><br><span class="line">did <span class="type">varchar</span>(<span class="number">2</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_05</span><br><span class="line"><span class="keyword">SET</span> sum_score<span class="operator">=</span>( <span class="keyword">SELECT</span> sum_score</span><br><span class="line">                <span class="keyword">FROM</span> test4_01</span><br><span class="line">                <span class="keyword">WHERE</span> test4_01.sid<span class="operator">=</span>test4_05.sid</span><br><span class="line">              )</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_05</span><br><span class="line"><span class="keyword">SET</span> avg_score<span class="operator">=</span>( <span class="keyword">SELECT</span> avg_score</span><br><span class="line">                <span class="keyword">FROM</span> test4_02</span><br><span class="line">                <span class="keyword">WHERE</span> test4_02.sid<span class="operator">=</span>test4_05.sid</span><br><span class="line">              )</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_05</span><br><span class="line"><span class="keyword">SET</span> sum_credit<span class="operator">=</span>(    <span class="keyword">SELECT</span> sum_credit</span><br><span class="line">                    <span class="keyword">FROM</span> test4_03</span><br><span class="line">                    <span class="keyword">WHERE</span> test4_03.sid<span class="operator">=</span>test4_05.sid</span><br><span class="line">               )</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_05</span><br><span class="line"><span class="keyword">SET</span> did<span class="operator">=</span>(   <span class="keyword">SELECT</span> did</span><br><span class="line">            <span class="keyword">FROM</span> pub.department</span><br><span class="line">            <span class="keyword">WHERE</span> test4_05.dname<span class="operator">=</span>pub.department.dname</span><br><span class="line">        )</span><br><span class="line"><span class="keyword">WHERE</span> test4_05.dname <span class="keyword">IN</span>(    <span class="keyword">SELECT</span> dname</span><br><span class="line">                            <span class="keyword">FROM</span> pub.department</span><br><span class="line">                       )</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_05</span><br><span class="line"><span class="keyword">SET</span> did<span class="operator">=</span>(   <span class="keyword">SELECT</span> did</span><br><span class="line">            <span class="keyword">FROM</span> pub.department_41</span><br><span class="line">            <span class="keyword">WHERE</span> test4_05.dname<span class="operator">=</span>pub.department_41.dname</span><br><span class="line">        )</span><br><span class="line"><span class="keyword">WHERE</span> test4_05.dname <span class="keyword">IN</span>(    <span class="keyword">SELECT</span> dname</span><br><span class="line">                            <span class="keyword">FROM</span> pub.department_41</span><br><span class="line">                       )</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_05</span><br><span class="line"><span class="keyword">SET</span> did<span class="operator">=</span><span class="string">&#x27;00&#x27;</span></span><br><span class="line"><span class="keyword">WHERE</span> did <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_42及数据复制到主用户的表test4_06中,对表中的数据进行整理，修复那些不规范的数据：<br>剔除姓名列中的所有空格；<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_06 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_42</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_06</span><br><span class="line"><span class="keyword">SET</span> name<span class="operator">=</span><span class="built_in">translate</span>(name,<span class="string">&#x27;/ &#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_42及数据复制到主用户的表test4_07中,对表中的数据进行整理，修复那些不规范的数据：<br>对性别列进行规范（需要先确定哪些性别数据不规范，也就是那些和大多数不一样的就是不规范的）；<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_07 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_42</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_07</span><br><span class="line"><span class="keyword">SET</span> sex<span class="operator">=</span><span class="built_in">translate</span>(sex,<span class="string">&#x27;/性&#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_07</span><br><span class="line"><span class="keyword">SET</span> sex<span class="operator">=</span><span class="built_in">translate</span>(sex,<span class="string">&#x27;/ &#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_42及数据复制到主用户的表test4_08中,对表中的数据进行整理，修复那些不规范的数据：<br>对班级列进行规范（需要先确定哪些班级不规范）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_08 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_42</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_08</span><br><span class="line"><span class="keyword">SET</span> class<span class="operator">=</span><span class="built_in">translate</span>(class,<span class="string">&#x27;/级&#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_42及数据复制到主用户的表test4_09中,对表中的数据进行整理，修复那些不规范的数据：<br>年龄为空值的根据出生日期设置学生年龄（截止到2012年的年龄，即年龄=2012-出生年份），年龄不为空值的不要改变。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_09 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_42</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_09</span><br><span class="line"><span class="keyword">SET</span> age<span class="operator">=</span><span class="number">2012</span><span class="operator">-</span><span class="built_in">EXTRACT</span>(<span class="keyword">year</span> <span class="keyword">FROM</span> birthday)</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure></li>
<li>将pub用户下的Student_42及数据复制到主用户的表test4_10中,对表中的数据进行整理，修复那些不规范的数据：<br>（1） 剔除姓名列中的所有空格；<br>（2） 剔除院系名称列中的所有空格；<br>（3） 对性别列进行规范（需要先确定哪些性别数据不规范，也就是那些和大多数不一样的就是不规范的）；<br>（4） 对班级列进行规范（需要先确定哪些班级不规范）。<br>（5） 年龄为空值的根据出生日期设置学生年龄（截止到2012年的年龄，即年龄=2012-出生年份），年龄不为空值的不要改变。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test4_10 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.Student_42</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_10</span><br><span class="line"><span class="keyword">SET</span> name<span class="operator">=</span><span class="built_in">translate</span>(name,<span class="string">&#x27;/ &#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_10</span><br><span class="line"><span class="keyword">SET</span> sex<span class="operator">=</span><span class="built_in">translate</span>(sex,<span class="string">&#x27;/性&#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_10</span><br><span class="line"><span class="keyword">SET</span> sex<span class="operator">=</span><span class="built_in">translate</span>(sex,<span class="string">&#x27;/ &#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_10</span><br><span class="line"><span class="keyword">SET</span> dname<span class="operator">=</span><span class="built_in">translate</span>(dname,<span class="string">&#x27;/ &#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_10</span><br><span class="line"><span class="keyword">SET</span> class<span class="operator">=</span><span class="built_in">translate</span>(class,<span class="string">&#x27;/级&#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test4_10</span><br><span class="line"><span class="keyword">SET</span> age<span class="operator">=</span><span class="number">2012</span><span class="operator">-</span><span class="built_in">EXTRACT</span>(<span class="keyword">year</span> <span class="keyword">FROM</span> birthday)</span><br><span class="line"><span class="keyword">WHERE</span> age <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验五"><a href="#实验五" class="headerlink" title="实验五"></a>实验五</h1><ol>
<li>在学生表pub.student中统计名字（姓名的第一位是姓氏，其余为名字，不考虑复姓）的使用的频率，将统计结果放入test5_01中，表结构如下。<br>First_name varchar(4) frequency numeric(4)<br>国强 1034<br>红 1232<br>卫东 2323<br>………………<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_01</span><br><span class="line">(</span><br><span class="line">    First_name <span class="type">varchar</span>(<span class="number">4</span>),</span><br><span class="line">    frequency <span class="type">numeric</span>(<span class="number">4</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_01</span><br><span class="line">(First_name,frequency)</span><br><span class="line">(   <span class="keyword">SELECT</span> substr(name,<span class="number">2</span>),<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">    <span class="keyword">FROM</span> pub.student</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> substr(name,<span class="number">2</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
<li>在学生表pub.student中统计名字（姓名的第一位是姓氏，不作统计，名字指姓名的第二个之后的汉字）的每个字使用的频率，将统计结果放入test5_02中（特别提示：需要区别union和union all的不同），表结构如下。<br>letter varchar(2) frequency numeric(4)<br>锋 1034<br>红 1232<br>鹏 2323<br>………………<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_02</span><br><span class="line">(</span><br><span class="line">    letter <span class="type">varchar</span>(<span class="number">2</span>),</span><br><span class="line">    frequency <span class="type">numeric</span>(<span class="number">4</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_02</span><br><span class="line">(letter,frequency)</span><br><span class="line"><span class="keyword">SELECT</span> letter,<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">(</span><br><span class="line">    (<span class="keyword">SELECT</span> substr(name,<span class="number">2</span>,<span class="number">1</span>) letter</span><br><span class="line">     <span class="keyword">FROM</span> pub.student)</span><br><span class="line">    <span class="keyword">UNION</span> <span class="keyword">ALL</span></span><br><span class="line">    (<span class="keyword">SELECT</span> substr(name,<span class="number">3</span>,<span class="number">1</span>) letter</span><br><span class="line">     <span class="keyword">FROM</span> pub.student)</span><br><span class="line">)</span><br><span class="line"><span class="keyword">WHERE</span> letter <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> letter</span><br></pre></td></tr></table></figure></li>
<li>创建”学院班级学分达标情况统计表1”test5_03，依据pub.student， pub.course，pub.student_course统计形成表中各项数据，成绩&gt;=60为及格计入学分，总学分&gt;=10算作达标，院系为空值的数据不统计在下表中，表结构：院系名称dname、班级class、学分达标人数p_count1、学分未达标人数p_count2、总人数p_count。<br>Dname varchar(30) class varchar(10) P_count1 Int P_count2 int P_count int<br>计算机学院 2006<br>计算机学院 2007<br>软件学院 2006<br>………………<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_03</span><br><span class="line">(</span><br><span class="line">    Dname <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    P_count1 <span class="type">int</span>,</span><br><span class="line">    P_count2 <span class="type">int</span>,</span><br><span class="line">    P_count <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_031</span><br><span class="line">(</span><br><span class="line">    dname <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    P_count <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_031</span><br><span class="line">(dname,class,P_count)</span><br><span class="line"><span class="keyword">SELECT</span> dname,class,<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dname,class</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_032</span><br><span class="line">(</span><br><span class="line">    dname <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    P_count1 <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_032</span><br><span class="line">(dname,class,P_count1)</span><br><span class="line"><span class="keyword">SELECT</span> dname,class,<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,<span class="built_in">sum</span>(credit) sum_credit</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.course</span><br><span class="line">        <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid</span><br><span class="line">     ) a</span><br><span class="line">     <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">     pub.student</span><br><span class="line"><span class="keyword">WHERE</span> a.sum_credit<span class="operator">&gt;=</span><span class="number">10</span> <span class="keyword">AND</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dname,class</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_033</span><br><span class="line">(</span><br><span class="line">    dname <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    P_count2 <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_033</span><br><span class="line">(dname,class,P_count2)</span><br><span class="line"><span class="keyword">SELECT</span> dname,class,<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,<span class="built_in">sum</span>(credit) sum_credit</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.course</span><br><span class="line">        <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid</span><br><span class="line">    ) a</span><br><span class="line">    <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">    pub.student</span><br><span class="line"><span class="keyword">WHERE</span> a.sum_credit<span class="operator">&lt;</span><span class="number">10</span> <span class="keyword">AND</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dname,class</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test5_031</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (dname,class)</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test5_032</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(dname,class)</span><br><span class="line"></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> test5_033</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY(dname,class)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_03</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test5_032 <span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> test5_033 <span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> test5_031</span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test5_03</span><br><span class="line"><span class="keyword">SET</span> P_count1<span class="operator">=</span><span class="number">0</span></span><br><span class="line"><span class="keyword">WHERE</span> P_count1 <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">UPDATE</span> test5_03</span><br><span class="line"><span class="keyword">SET</span> P_count2<span class="operator">=</span>P_count<span class="operator">-</span>P_count1</span><br></pre></td></tr></table></figure></li>
<li>创建”学院班级学分达标情况统计表2”test5_04，依据pub.student， pub.course，pub.student_course统计形成表中各项数据，成绩&gt;=60为及格计入学分，2008级及之前的班级总学分&gt;=8算作达标，2008级之后的班级学分&gt;=10算作达标，院系为空值的数据不统计在下表中，表结构：院系名称dname、班级class、学分达标人数p_count1、学分未达标人数p_count2、总人数p_count。<br>Dname  varchar(30) class  varchar(10) P_count1 int P_count2 int P_count int<br>计算机学院 2006<br>计算机学院 2007<br>软件学院 2006<br>………………<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_04</span><br><span class="line">(</span><br><span class="line">    dname <span class="type">varchar</span>(<span class="number">30</span>),</span><br><span class="line">    class <span class="type">varchar</span>(<span class="number">10</span>),</span><br><span class="line">    P_count1 <span class="type">int</span>,</span><br><span class="line">    P_count2 <span class="type">int</span>,</span><br><span class="line">    P_count <span class="type">int</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test5_04</span><br><span class="line"><span class="keyword">SELECT</span> t1.dname,t1.class,t2.p_count1,(t1.p_count<span class="operator">-</span>t2.p_count1) p_count2,t1.p_count</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> dname,class,<span class="built_in">count</span>(<span class="operator">*</span>) p_count</span><br><span class="line">        <span class="keyword">FROM</span> pub.student</span><br><span class="line">        <span class="keyword">WHERE</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> dname,class</span><br><span class="line">    )t1,</span><br><span class="line">    (   <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> dname,class,<span class="built_in">count</span>(<span class="operator">*</span>)p_count1</span><br><span class="line">        <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,dname,class,<span class="built_in">sum</span>(credit) sum_credit</span><br><span class="line">                <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,cid,dname,class,<span class="built_in">max</span>(score) max_score</span><br><span class="line">                        <span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.student</span><br><span class="line">                        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid,dname,class</span><br><span class="line">                    )</span><br><span class="line">                    <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">                    pub.course</span><br><span class="line">                <span class="keyword">WHERE</span> max_score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">AND</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">                <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,dname,class</span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">WHERE</span> sum_credit<span class="operator">&gt;=</span></span><br><span class="line">            <span class="keyword">case</span></span><br><span class="line">                <span class="keyword">when</span> class<span class="operator">&lt;=</span><span class="number">2008</span> <span class="keyword">then</span> <span class="number">8</span></span><br><span class="line">                <span class="keyword">when</span> class<span class="operator">&gt;</span><span class="number">2008</span> <span class="keyword">then</span> <span class="number">10</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> dname,class</span><br><span class="line">    )t2</span><br><span class="line"><span class="keyword">WHERE</span> t1.dname<span class="operator">=</span>t2.dname <span class="keyword">AND</span> t1.class<span class="operator">=</span>t2.class</span><br></pre></td></tr></table></figure></li>
<li>注意事项：<br>如果一个学生一门课程有多次成绩，仅仅计算最高成绩，也就是只用他的最好成绩参加如下统计。<br>5． 查询各院系（不包括院系名称为空的）的数据结构平均成绩avg_ds_score、操作系统平均成绩avg_os_score，平均成绩四舍五入到个位，创建表test5_05，表结构及格式如下：<br>Dname Avg_ds_score Avg_os_score<br>马克思主义学院 72 70<br>软件学院 77 74<br>艺术学院 77 76<br>医学院 74 73  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_051 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> dname,round(<span class="built_in">avg</span>(max_score))avg_ds_score</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> dname,max_score</span><br><span class="line">        <span class="keyword">FROM</span> pub.student</span><br><span class="line">             <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">             (<span class="keyword">SELECT</span> sid,cid,<span class="built_in">max</span>(score) max_score</span><br><span class="line">              <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">              <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid)</span><br><span class="line">        <span class="keyword">WHERE</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">AND</span> cid<span class="operator">=</span><span class="number">300002</span></span><br><span class="line">    )</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dname</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_052 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> dname,round(<span class="built_in">avg</span>(max_score))avg_os_score</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> dname,max_score</span><br><span class="line">        <span class="keyword">FROM</span> pub.student</span><br><span class="line">             <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">             (<span class="keyword">SELECT</span> sid,cid,<span class="built_in">max</span>(score) max_score</span><br><span class="line">              <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">              <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid)</span><br><span class="line">        <span class="keyword">WHERE</span> dname <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">AND</span> cid<span class="operator">=</span><span class="number">300005</span>)</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> dname</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_05 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test5_051 <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> test5_052</span><br></pre></td></tr></table></figure></li>
<li>查询”计算机科学与技术学院”的同时选修了数据结构、操作系统两门课的学生的学号sid、姓名name、院系名称dname、数据结构成绩ds_score、操作系统成绩os_score，创建表test5_06，表结构及格式如下：<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_061 <span class="keyword">as</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,dname,Max_score ds_score</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line">     <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">     (  <span class="keyword">SELECT</span> sid,cid,<span class="built_in">max</span>(score) Max_score</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid</span><br><span class="line">     )</span><br><span class="line"><span class="keyword">WHERE</span> dname<span class="operator">=</span><span class="string">&#x27;计算机科学与技术学院&#x27;</span> <span class="keyword">AND</span> cid<span class="operator">=</span><span class="number">300002</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_062 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,dname,Max_score os_score</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line">     <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">     (  <span class="keyword">SELECT</span> sid,cid,<span class="built_in">max</span>(score) Max_score</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,cid</span><br><span class="line">     )</span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">dname<span class="operator">=</span><span class="string">&#x27;计算机科学与技术学院&#x27;</span> <span class="keyword">AND</span> cid<span class="operator">=</span><span class="number">300005</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test5_06 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">test5_061 <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> test5_062</span><br></pre></td></tr></table></figure></li>
<li>查询计算机科学与技术学院的选修了数据结构或者操作系统的学生的学号sid、姓名name、院系名称dname、数据结构成绩ds_score、操作系统成绩os_score，创建表test5_07，表结构及格式如下：<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test5_07 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test5_061 <span class="keyword">NATURAL</span> <span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> test5_062</span><br></pre></td></tr></table></figure></li>
<li>查询计算机科学与技术学院所有学生的学号sid、姓名name、院系名称dname、数据结构成绩ds_score、操作系统成绩os_score，创建表test5_08，表结构及格式如下  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test5_08 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid, name, dname, ds_score, os_score</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sid,name,dname</span><br><span class="line">		<span class="keyword">FROM</span> pub.student</span><br><span class="line">		<span class="keyword">WHERE</span> dname <span class="operator">=</span> <span class="string">&#x27;计算机科学与技术学院&#x27;</span></span><br><span class="line">    )</span><br><span class="line">	<span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> </span><br><span class="line">	(   <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sid, <span class="built_in">max</span>(score) ds_score</span><br><span class="line">		<span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.course</span><br><span class="line">		<span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;数据结构&#x27;</span></span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span> sid</span><br><span class="line">    )</span><br><span class="line">	<span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span></span><br><span class="line">	(   <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sid, <span class="built_in">max</span>(score) os_score</span><br><span class="line">		<span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.course</span><br><span class="line">		<span class="keyword">WHERE</span> name <span class="operator">=</span> <span class="string">&#x27;操作系统&#x27;</span></span><br><span class="line">		<span class="keyword">GROUP</span> <span class="keyword">BY</span> sid)</span><br></pre></td></tr></table></figure></li>
<li>创建”成绩及格学生每个成绩人数百分比统计表” 视图test5_09，依据pub.student_course统计形成视图中各项数据，成绩&gt;=60为及格，视图结构：成绩score、对应成绩人数count1、及格总人数count0、站总人数的百分比percentage（即前面两列相除后乘以100）。其中百分比四舍五入到小数点后面2位。输出按成绩排序。<br>视图内容示例如下：<br>Score   Count1   Count0   percentage<br>60     66   1590      10.01<br>61     67   1590      10.02<br>………… 1590      ……<br>100     6   1590      1.11  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test5_09 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>(   (   <span class="keyword">SELECT</span> score,<span class="built_in">count</span>(sid) count1</span><br><span class="line">            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">            <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> score</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">        (   <span class="keyword">SELECT</span> <span class="built_in">count</span>(sid) count0</span><br><span class="line">            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">            <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">        (   <span class="keyword">SELECT</span> score,round((count4<span class="operator">/</span>count3)<span class="operator">*</span><span class="number">100</span>,<span class="number">2</span>) percentage</span><br><span class="line">            <span class="keyword">FROM</span>(   (   <span class="keyword">SELECT</span> score,<span class="built_in">count</span>(sid) count4</span><br><span class="line">                        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                        <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">                        <span class="keyword">GROUP</span> <span class="keyword">BY</span> score</span><br><span class="line">                    )</span><br><span class="line">                    <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">                    (   <span class="keyword">SELECT</span> <span class="built_in">count</span>(sid) count3</span><br><span class="line">                        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                        <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">                    )</span><br><span class="line">                )</span><br><span class="line">        )</span><br><span class="line">    )</span><br></pre></td></tr></table></figure></li>
<li>创建”每个课程成绩在60-99分之间每段成绩的人数百分比统计表”视图test5_10，依据pub.course，pub.student_course统计形成视图中各项数据，仅仅统计成绩在60-99（包含60和99）之间成绩，视图结构：课程编号cid、课程名称cname、成绩score（这个列内容不要包含空格）、对应成绩人数count1、及格总人数count0、站总人数的百分比percentage（即前面两列相除后乘以100）。其中百分比四舍五入到小数点后面2位。输出按课程编号、成绩排序。<br>视图内容示例如下：<br>cid    Cname    Score  Count1  Count0 percentage<br>200001 数据结构 60-69   200   2000   10<br>200001 数据结构 70-79   400   2000   20<br>200001 数据结构 80-89   600   2000   30<br>200001 数据结构 90-99   800   2000   40<br>200002 数据库   60-69   500   1000   50<br>200002 数据库   90-99   500   1000   50  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test5_101 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span>(   (   <span class="keyword">SELECT</span> cid,name cname</span><br><span class="line">            <span class="keyword">FROM</span> pub.course</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">        (   <span class="keyword">SELECT</span> (t.con<span class="operator">*</span><span class="number">10</span>)<span class="operator">||</span><span class="string">&#x27;-&#x27;</span><span class="operator">||</span>((t.con<span class="operator">+</span><span class="number">1</span>)<span class="operator">*</span><span class="number">10</span><span class="number">-1</span>) score,<span class="built_in">count</span>(t.sid) count1,t.cid</span><br><span class="line">            <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> <span class="built_in">floor</span>(score<span class="operator">/</span><span class="number">10</span>) con,cid,sid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                    <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">AND</span> score<span class="operator">&lt;</span><span class="number">100</span></span><br><span class="line">                ) t</span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> t.con,t.cid</span><br><span class="line">            <span class="keyword">ORDER</span> <span class="keyword">BY</span> t.con,t.cid</span><br><span class="line">        )</span><br><span class="line">        <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span></span><br><span class="line">        (   <span class="keyword">SELECT</span> <span class="built_in">count</span>(sid) count0,cid</span><br><span class="line">            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">            <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">AND</span> score<span class="operator">&lt;</span><span class="number">100</span></span><br><span class="line">            <span class="keyword">GROUP</span> <span class="keyword">BY</span> cid</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test5_102 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>(   (   <span class="keyword">SELECT</span> cid,cname,score,round((count4<span class="operator">/</span>count3)<span class="operator">*</span><span class="number">100</span>,<span class="number">2</span>) percentage</span><br><span class="line">            <span class="keyword">FROM</span>(   (   <span class="keyword">SELECT</span> cid,name cname</span><br><span class="line">                        <span class="keyword">FROM</span> pub.course</span><br><span class="line">                    )</span><br><span class="line">                    <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">                    (   <span class="keyword">SELECT</span> (t.con<span class="operator">*</span><span class="number">10</span>)<span class="operator">||</span><span class="string">&#x27;-&#x27;</span><span class="operator">||</span>((t.con<span class="operator">+</span><span class="number">1</span>)<span class="operator">*</span><span class="number">10</span><span class="number">-1</span>) score,<span class="built_in">count</span>(t.sid) count4,t.cid</span><br><span class="line">                        <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> <span class="built_in">floor</span>(score<span class="operator">/</span><span class="number">10</span>) con,cid,sid</span><br><span class="line">                                <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                                <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">AND</span> score<span class="operator">&lt;</span><span class="number">100</span></span><br><span class="line">                            ) t</span><br><span class="line">                        <span class="keyword">GROUP</span> <span class="keyword">BY</span> t.con,t.cid</span><br><span class="line">                        <span class="keyword">ORDER</span> <span class="keyword">BY</span> t.con,t.cid</span><br><span class="line">                    )</span><br><span class="line">                    <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span></span><br><span class="line">                    (   <span class="keyword">SELECT</span> <span class="built_in">count</span>(sid) count3,cid</span><br><span class="line">                        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                        <span class="keyword">WHERE</span> score<span class="operator">&gt;=</span><span class="number">60</span> <span class="keyword">AND</span> score<span class="operator">&lt;</span><span class="number">100</span></span><br><span class="line">                        <span class="keyword">GROUP</span> <span class="keyword">BY</span> cid</span><br><span class="line">                    )</span><br><span class="line">                )</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test5_10 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> test5_102 <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> test5_101</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验六"><a href="#实验六" class="headerlink" title="实验六"></a>实验六</h1><ol>
<li>例如：找出年龄小于20岁的所有学生的学号、姓名、年龄<br>正确执行:create view test6_00 as select sid，name，age from pub.student where age&gt;20<br>Oracle扩展后方便写法：<br>create or replace view test6_00 as select sid，name，age from pub.student where age&gt;20<br>直行select count(*) from test6_00 检查是否能够5分钟内查询出全部结果，如果超时说明可能有错误，这种情况下严禁执行”update dbtest set test=6”进行交卷。<br>找出年龄小于20岁且是”物理学院”的学生的学号、姓名、院系名称,按学号排序。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_01 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,age,dname</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> age<span class="operator">&lt;</span><span class="number">20</span> <span class="keyword">AND</span> dname<span class="operator">=</span><span class="string">&#x27;物理学院&#x27;</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sid</span><br></pre></td></tr></table></figure></li>
<li>查询统计2009级、软件学院每个学生的学号、姓名、总成绩（列名sum_score）（如果有学生没有选一门课，则总成绩为空值）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_02 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,(<span class="built_in">sum</span>(score))sum_score</span><br><span class="line"><span class="keyword">FROM</span> pub.student <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> pub.student_course</span><br><span class="line"><span class="keyword">WHERE</span> class<span class="operator">=</span><span class="number">2009</span> <span class="keyword">AND</span> dname<span class="operator">=</span><span class="string">&#x27;软件学院&#x27;</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,name</span><br></pre></td></tr></table></figure></li>
<li>查询2010级、计算机科学与技术学院、操作系统的学生成绩表，内容有学号、姓名、成绩。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> test6_03 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,score</span><br><span class="line"><span class="keyword">FROM</span> pub.student <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> pub.student_course</span><br><span class="line"><span class="keyword">WHERE</span> class<span class="operator">=</span><span class="number">2010</span> <span class="keyword">AND</span> dname<span class="operator">=</span><span class="string">&#x27;计算机科学与技术学院&#x27;</span> <span class="keyword">AND</span> cid<span class="operator">=</span><span class="number">300005</span></span><br></pre></td></tr></table></figure></li>
<li>找出选修”数据库系统”课程，且成绩大于90的学生的学号、姓名<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_04 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> pub.student_course</span><br><span class="line"><span class="keyword">WHERE</span> cid<span class="operator">=</span><span class="number">300003</span> <span class="keyword">AND</span> score<span class="operator">&gt;</span><span class="number">90</span></span><br></pre></td></tr></table></figure></li>
<li>找出姓名叫”李龙”的学生的学号及其选修全部课程的课程号、课程名和成绩。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_05 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,cid,name,score</span><br><span class="line"><span class="keyword">FROM</span> pub.student_course <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> pub.course</span><br><span class="line"><span class="keyword">WHERE</span> sid <span class="keyword">IN</span> (  <span class="keyword">SELECT</span> sid</span><br><span class="line">                <span class="keyword">FROM</span> pub.student</span><br><span class="line">                <span class="keyword">WHERE</span> name<span class="operator">=</span><span class="string">&#x27;李龙&#x27;</span></span><br><span class="line">             )</span><br></pre></td></tr></table></figure></li>
<li>找出选修了所有课程的学生的学号、姓名<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_06 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student S</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(   <span class="keyword">SELECT</span> cid </span><br><span class="line">                    <span class="keyword">FROM</span> pub.course</span><br><span class="line">                    MINUS</span><br><span class="line">                    <span class="keyword">SELECT</span> cid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student_course T</span><br><span class="line">                    <span class="keyword">WHERE</span> T.sid<span class="operator">=</span>S.sid</span><br><span class="line">                )</span><br></pre></td></tr></table></figure></li>
<li>找出选修了所有课程并且每门课程每次考试成绩均及格的学生的学号、姓名。（题6的延伸和巩固）<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_07 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student S</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.course</span><br><span class="line">                    MINUS</span><br><span class="line">                    <span class="keyword">SELECT</span> cid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student_course T</span><br><span class="line">                    <span class="keyword">WHERE</span> T.sid<span class="operator">=</span>S.sid</span><br><span class="line">                )</span><br><span class="line">      <span class="keyword">AND</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span>(   <span class="keyword">SELECT</span> sid</span><br><span class="line">                        <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                        <span class="keyword">WHERE</span> score<span class="operator">&lt;</span><span class="number">60</span></span><br><span class="line">                    )</span><br></pre></td></tr></table></figure></li>
<li>找出选修了所有课程并且得到所有课程的学分（即每门课程最少一次考试及格）的学生的学号、姓名。（题6的 延伸和巩固）。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_08 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.student S</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>(   <span class="keyword">SELECT</span> cid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.course</span><br><span class="line">                    MINUS</span><br><span class="line">                    <span class="keyword">SELECT</span> cid</span><br><span class="line">                    <span class="keyword">FROM</span> pub.student_course T</span><br><span class="line">                    <span class="keyword">WHERE</span> T.sid<span class="operator">=</span>S.sid <span class="keyword">AND</span> T.score<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">                )</span><br></pre></td></tr></table></figure></li>
<li>查询统计2010级、化学与化工学院的学生总学分表，内容有学号、姓名、总学分sum_credit。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_09 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,<span class="built_in">sum</span>(credit)sum_credit</span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sid,name, cid,credit</span><br><span class="line">        <span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> a.sid,a.name,b.cid,c.credit,b.score</span><br><span class="line">                <span class="keyword">FROM</span> pub.student a,pub.student_course b,pub.course c</span><br><span class="line">                <span class="keyword">WHERE</span> a.sid<span class="operator">=</span>b.sid <span class="keyword">AND</span> b.cid<span class="operator">=</span>c.cid <span class="keyword">AND</span> a.class<span class="operator">=</span><span class="number">2010</span> <span class="keyword">AND</span> a.dname<span class="operator">=</span><span class="string">&#x27;化学与化工学院&#x27;</span></span><br><span class="line">            )</span><br><span class="line">        <span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,name,cid,credit</span><br><span class="line">        <span class="keyword">HAVING</span> <span class="built_in">max</span>(score)<span class="operator">&gt;=</span><span class="number">60</span></span><br><span class="line">    )</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> sid,name</span><br></pre></td></tr></table></figure></li>
<li>找出有间接先行课的所有课程的课程号、课程名称。<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test6_10 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> cid,name</span><br><span class="line"><span class="keyword">FROM</span> pub.course</span><br><span class="line"><span class="keyword">WHERE</span> fcid <span class="keyword">IN</span> ( <span class="keyword">SELECT</span> cid</span><br><span class="line">                <span class="keyword">FROM</span> pub.course</span><br><span class="line">                <span class="keyword">WHERE</span> fcid <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">              )</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验七"><a href="#实验七" class="headerlink" title="实验七"></a>实验七</h1><ol>
<li><ul>
<li>将pub用户下表student的3个列sid,name,birthday复制到表test7_01中。  </li>
<li>执行如下查询，观察运行速度（5秒以上）。<br>查询Samefirstname相同姓氏的人数。<br>select <em> from<br>(select sid,name,birthday,<br>(select count(</em>) from test7_01 where substr(name,1,1)=substr(t1.name,1,1)) samefirstname<br>from pub.student_testindex t1)<br>where samefirstname=7  </li>
<li>为test7_01创建一个仅仅一个索引，保证上面SQL耗时在1秒内。  </li>
<li>交卷验证  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test7_01 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,birthday</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX temp_index <span class="keyword">ON</span> test7_01 (substr(name,<span class="number">1</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><ul>
<li>将pub用户下表student的3个列sid,name,birthday复制到表test7_02中。  </li>
<li>将出生日期全部修改成一天：<br>Update test7_02 set birthday=to_date(‘19881018’,’yyyymmdd’) where substr(sid,12,1)=’0’;  </li>
<li>为test7_02创建一个仅仅一个索引，保证下面SQL耗时在1秒内。<br>Samenamebirthday同名同生日的人数，Samebirthday相同出生日期的人数<br>select <em> from<br>(select sid,name,birthday,<br>(select count(</em>) from test7_02 where name=t1.name and birthday=t1.birthday) samenamebirthday,<br>(select count(*) from test7_02 where birthday=t1.birthday) samebirthday<br>from pub.student_testindex t1)<br>where samebirthday=403  </li>
<li>交卷验证  </li>
<li>思考题，test7_02不增建索引情况下，下面这个查询能使用索引吗？改进后能使用索引吗？<br>select <em> from<br>(select sid,name,birthday,<br>(select count(</em>) from test7_02 where name=t1.name) samename<br>from pub.student t1)<br>where samename=7  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test7_02 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> sid,name,birthday</span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"></span><br><span class="line"><span class="keyword">Update</span> test7_02 <span class="keyword">SET</span> birthday<span class="operator">=</span>to_date(<span class="string">&#x27;19881018&#x27;</span>,<span class="string">&#x27;yyyymmdd&#x27;</span>) <span class="keyword">where</span> substr(sid,<span class="number">12</span>,<span class="number">1</span>)<span class="operator">=</span><span class="string">&#x27;0&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> INDEX index2 <span class="keyword">ON</span> test7_02 (birthday,name)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><ul>
<li>pub用户下表student已经用下面两句SQL创建了两索引。<br>Create index student_birthday on student(birthday);<br>Create index student_name on student(name);  </li>
<li>下面SQL不能用索引耗时超过2秒，在逻辑不变情况下，修改SQL中标为记红色的子查询的where条件部分，不要修改其它地方，使其能使用索引。<br>说明：因为pub.student_testindex数据行数太少，不能通过修改主句where绕过问题。<br>查询samefirstname同姓氏的人数。<br>select <em> from<br>(select sid,name,birthday,<br>(select count(</em>) from pub.student<br>where substr(name,1,1)=substr(t1.name,1,1)<br>) samefirstname<br>from pub.student_testindex t1) where samefirstname=7  </li>
<li>修改以后验证耗时在2秒之内，将修改以后语句创建成视图create view test7_03 as select ……。  </li>
<li>交卷验证  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test7_03 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,name,birthday,(  <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">                                    <span class="keyword">FROM</span> pub.student</span><br><span class="line">                                    <span class="keyword">where</span> name <span class="keyword">LIKE</span> concat(substr(t1.name,<span class="number">1</span>,<span class="number">1</span>),<span class="string">&#x27;%&#x27;</span>)</span><br><span class="line">                                 ) samefirstname</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_testindex t1</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">WHERE</span> samefirstname<span class="operator">=</span><span class="number">7</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><ul>
<li>pub用户下表student已经用下面两句SQL创建了两索引。<br>Create index student_birthday on student(birthday);<br>Create index student_name on student(name);  </li>
<li>下面SQL不能用索引耗时超过1秒，在逻辑不变情况下，修改SQL中标为记红色的子查询的where条件部分，不要修改其它地方，使其能使用索引。<br>说明：因为pub.student_testindex数据行数太少，不能通过修改主句where绕过问题。<br>select <em> from<br>(select sid,name,birthday,<br>(select count(</em>) from pub.student<br>where to_char(birthday,’yyyymm’)=to_char(t1.birthday,’yyyymm’)<br>) sameyearmonth,<br>(select count(*) from pub.student<br>where extract (year from birthday) =extract (year from t1.birthday)<br>) sameyear<br>from pub.student_testindex t1) where sameyearmonth=35  </li>
<li>修改以后验证耗时在1秒之内，将修改以后语句创建成视图create view test7_04 as select ……。  </li>
<li>交卷验证  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test7_04 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,name,birthday,(  <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">                                    <span class="keyword">FROM</span> pub.student</span><br><span class="line">                                    <span class="keyword">WHERE</span> birthday<span class="operator">&gt;=</span>trunc(t1.birthday,<span class="string">&#x27;mm&#x27;</span>) <span class="keyword">AND</span> birthday<span class="operator">&lt;=</span>last_day(t1.birthday)</span><br><span class="line">                                 ) sameyearmonth,(  <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">                                                    <span class="keyword">FROM</span> pub.student</span><br><span class="line">                                                    <span class="keyword">WHERE</span> birthday<span class="operator">&gt;=</span>trunc(t1.birthday,<span class="string">&#x27;yyyy&#x27;</span>) <span class="keyword">AND</span> birthday<span class="operator">&lt;=</span>last_day(add_months(trunc(t1.birthday,<span class="string">&#x27;y&#x27;</span>),<span class="number">11</span>))</span><br><span class="line">                                                 ) sameyear</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_testindex t1</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">WHERE</span> sameyearmonth<span class="operator">=</span><span class="number">35</span></span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><ul>
<li>pub用户下表student已经用下面两句SQL创建了两索引。<br>Create index student_birthday on student(birthday);<br>Create index student_name on student(name);  </li>
<li>下面SQL不能用索引耗时超过1秒，在逻辑不变情况下，修改SQL中标为记红色的子查询的where条件部分，不要修改其它地方，使其能使用索引。<br>说明：因为pub.student_testindex数据行数太少，不能通过修改主句where绕过问题。<br>查询nextbirthday晚一天出生的人数<br>select <em> from<br>(select sid,name,birthday,<br>(select count(</em>) from pub.student<br>where birthday-1=t1.birthday<br>) nextbirthday<br>from pub.student_testindex t1) where nextbirthday=7  </li>
<li>修改以后验证耗时在1秒之内，将修改以后语句创建成视图create view test7_05 as select ……。  </li>
<li>交卷验证  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> test7_05 <span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span>(   <span class="keyword">SELECT</span> sid,name,birthday,(  <span class="keyword">SELECT</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">                                    <span class="keyword">FROM</span> pub.student</span><br><span class="line">                                    <span class="keyword">WHERE</span> birthday<span class="operator">=</span>t1.birthday<span class="operator">+</span><span class="number">1</span></span><br><span class="line">                                 ) nextbirthday</span><br><span class="line">        <span class="keyword">FROM</span> pub.student_testindex t1</span><br><span class="line">    )</span><br><span class="line"><span class="keyword">WHERE</span> nextbirthday<span class="operator">=</span><span class="number">7</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
<h1 id="实验八"><a href="#实验八" class="headerlink" title="实验八"></a>实验八</h1><ol>
<li>实验五 数据修改的提交和回退、实体授权<br>一、 实验内容<br>启动两个不同浏览器，firefox登录主账号userID、360浏览器登录备用账号userbID，测试提交和回退的作用,了解锁等待、授权知识。<br>二、 实验步骤<br>1． 使用主用户userID登入数据库，简称主窗口。<br>2． 使用备用用户userbID登入数据库，简称备用窗口。<br>3． 关闭自动提交复选框。<br>4． 主用户访问备用用户的表之前，需要在备用账号中将相应的表的相应的权限授权给主用户，这样主用户才可以查询操作备用用户的相应的表。<br>在主用户下可以执行select * from userbId.test8_00查询备用用户的表test8_00的数据，如果没有授权，则会提示表没有表找到。<br>如果备用用户执行grant select on  test8_00 to userID，即授权表test8_00的select权限给用户userID，上面的查询语句就可以正确执行，并查询到相应的结果。<br>5． 常用的授权、命令:<br>grant select on  test8_00 to userID授权表test8_00的select权限给用户userID。<br>grant update on  test8_00 to userID授权表test8_00的update权限给用户userID。<br>grant insert on  test8_00 to userID授权表test8_00的insert权限给用户userID。<br>grant delete on  test8_00 to userID授权表test8_00的delete权限给用户userID。<br>grant all on  test8_00 to userID授权表test8_00的all权限给用户userID。<br>revoke select on  test8_00 from userID收回表test8_00的insert权限从用户userID。<br>6． 在备用用户下将pub.teacher复制到test8_00中，然后将其所有权限给主用户。<br>7． 按表中序号在相应窗口执行对应的命令（主用户访问备用用户表需要授权）。<br>表格详见《数据库系统实验大纲》<br>8． 假设数据中有张老师，通过上面的操作以后，他在每次查询的时候的年龄是多少？根据你的判断得出结果，然后按步骤进行实验验证，在主用户下创建一个表test8_10(test varchar(20),age numeric (3)),插入10行数据，分表存放10个结果。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> teat8_10</span><br><span class="line">(</span><br><span class="line">    test <span class="type">varchar</span>(<span class="number">20</span>),</span><br><span class="line">    age <span class="type">numeric</span> (<span class="number">3</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">1</span>’,<span class="number">88</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">2</span>’,<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">3</span>’,<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">4</span>’,<span class="number">86</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">5</span>’,<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">6</span>’,<span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">7</span>’,<span class="number">86</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">8</span>’,<span class="number">86</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">9</span>’,<span class="number">76</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test8_10 (test,age) <span class="keyword">VALUES</span>(‘结果<span class="number">10</span>’,<span class="number">86</span>)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="实验九"><a href="#实验九" class="headerlink" title="实验九"></a>实验九</h1><ol>
<li>一、实验内容<br>学会复制表结构、学会插入数据，特别是学会如何避免重复插入，也就是如何避免插入已经存在的数据。<br>二、实验题目1<br>1．创建表test9_01，表的结构同pub.student_11_1一样。<br>2．为test9_01的sid创建唯一不重复索引。<br>3．将pub用户下的Student中性别是“女”的数据添加到test9_01中。<br>4．将pub用户下的Student_11_1中性别是“女”的数据添加到test9_01中,如果某个学号已经包含在test9_01中，这个记录就不要再插入了（即不要插入重复学号的数据）。<br>5．将pub用户下的Student_11_2中性别是“女”的数据添加到test9_01中,如果某个学号已经包含在test9_01中，这个记录就不要再插入了（即不要插入重复学号的数据）。<br>6．要求完成上述功能，请采用1条create table、1条create index、3条insert共5条SQL方式完成。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test9_01</span><br><span class="line">(</span><br><span class="line">    sid <span class="type">char</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    name varchar2(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">2</span>),</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    birthday <span class="type">date</span>,</span><br><span class="line">    dname varchar2(<span class="number">30</span>),</span><br><span class="line">    class varchar2(<span class="number">10</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test9_01</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pub.student <span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test9_01</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pub.student_11_1 <span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> sid <span class="keyword">FROM</span> test9_01)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test9_01</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> pub.student_11_2 <span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span> (<span class="keyword">SELECT</span> sid <span class="keyword">FROM</span> test9_01)</span><br></pre></td></tr></table></figure></li>
<li>三、实验题目2<br>7．创建表test9_02，表的结构同pub.student_11_1一样。<br>8．为test9_02的sid创建唯一不重复索引。<br>9．将pub用户下的Student中性别是“女”的且pub.student_course中存在不及格成绩的同学添加到test9_02中。<br>10．将pub用户下的Student_11_1中性别是“女”的且pub.student_course中存在不及格成绩的同学数据添加到test9_02中,如果某个学号已经包含在test9_02中，这个记录就不要再插入了（即不要插入重复学号的数据）。<br>11．将pub用户下的Student_11_2中性别是“女”的且pub.student_course中存在不及格成绩的同学数据添加到test9_02中,如果某个学号已经包含在test9_02中，这个记录就不要再插入了（即不要插入重复学号的数据）。<br>12．要求完成上述功能，请采用1条create table、1条create index、3条insert共5条SQL方式完成。  <figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test9_02</span><br><span class="line">(</span><br><span class="line">    sid <span class="type">char</span>(<span class="number">12</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    name varchar2(<span class="number">10</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    sex <span class="type">char</span>(<span class="number">2</span>), </span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    birthday <span class="type">date</span>,</span><br><span class="line">    dname varchar2(<span class="number">30</span>),</span><br><span class="line">    class varchar2(<span class="number">10</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test9_02</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.student</span><br><span class="line"><span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sid <span class="keyword">IN</span>(  <span class="keyword">SELECT</span> sid</span><br><span class="line">                            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                            <span class="keyword">WHERE</span> score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">                         )</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test9_02</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.student_11_1</span><br><span class="line"><span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sid <span class="keyword">IN</span>(  <span class="keyword">SELECT</span> sid</span><br><span class="line">                            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                            <span class="keyword">WHERE</span> score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">                         )</span><br><span class="line">               <span class="keyword">AND</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span>(  <span class="keyword">SELECT</span> sid</span><br><span class="line">                                <span class="keyword">FROM</span> test9_02</span><br><span class="line">                             )</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test9_02</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> pub.student_11_2</span><br><span class="line"><span class="keyword">WHERE</span> sex<span class="operator">=</span><span class="string">&#x27;女&#x27;</span> <span class="keyword">AND</span> sid <span class="keyword">IN</span>(  <span class="keyword">SELECT</span> sid</span><br><span class="line">                            <span class="keyword">FROM</span> pub.student_course</span><br><span class="line">                            <span class="keyword">WHERE</span> score <span class="operator">&lt;</span> <span class="number">60</span></span><br><span class="line">                         )</span><br><span class="line">               <span class="keyword">AND</span> sid <span class="keyword">NOT</span> <span class="keyword">IN</span>(  <span class="keyword">SELECT</span> sid</span><br><span class="line">                                <span class="keyword">FROM</span> test9_02</span><br><span class="line">                             )</span><br></pre></td></tr></table></figure></li>
</ol>
</article><div class="post-copyright"><div class="post-copyright__title"><span class="post-copyright-info"><h>山东大学软件学院数据库系统概念实验答案（2022）</h></span></div><div class="post-copyright__type"><span class="post-copyright-info"><a href="http://roundedorange.top/cf5716c0.html">http://roundedorange.top/cf5716c0.html</a></span></div><div class="post-copyright-m"><div class="post-copyright-m-info"><div class="post-copyright-a" style="display: inline-block;width: 120px"><h>作者</h><div class="post-copyright-cc-info"><h>滚圆的小橘子</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>发布于</h><div class="post-copyright-cc-info"><h>2022-03-29</h></div></div><div class="post-copyright-u" style="display: inline-block;width: 120px"><h>更新于</h><div class="post-copyright-cc-info"><h>2023-04-06</h></div></div><div class="post-copyright-c" style="display: inline-block;width: 120px"><h>许可协议</h><div class="post-copyright-cc-info"><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a rel="noopener" target="_blank" title="CC BY 4.0" href="https://creativecommons.org/licenses/by/4.0/deed.zh">CC BY 4.0</a></div></div></div></div></div><div class="tag_share"><div class="post_share"><div class="social-share" data-image="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><link rel="stylesheet" href="/css/coin.css" media="defer" onload="this.media='all'"/><div class="post-reward"><button class="tip-button reward-button"><span class="tip-button__text">打赏给小橘子</span><div class="coin-wrapper"><div class="coin"><div class="coin__middle"></div><div class="coin__back"></div><div class="coin__front"></div></div></div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/pictures/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/pictures/alipay.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></button></div><audio id="coinAudio" src="https://npm.elemecdn.com/akilar-candyassets@1.0.16/audio/coin.mp3"></audio><script defer="defer" src="/js/coin.js"></script><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%80"><span class="toc-number">1.</span> <span class="toc-text">实验一</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BA%8C"><span class="toc-number">2.</span> <span class="toc-text">实验二</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%89"><span class="toc-number">3.</span> <span class="toc-text">实验三</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%9B%9B"><span class="toc-number">4.</span> <span class="toc-text">实验四</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%BA%94"><span class="toc-number">5.</span> <span class="toc-text">实验五</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%85%AD"><span class="toc-number">6.</span> <span class="toc-text">实验六</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B8%83"><span class="toc-number">7.</span> <span class="toc-text">实验七</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%85%AB"><span class="toc-number">8.</span> <span class="toc-text">实验八</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E4%B9%9D"><span class="toc-number">9.</span> <span class="toc-text">实验九</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 滚圆的小橘子</div><div class="footer_custom_text"><a href="https://icp.gov.moe/?keyword=20228421" target="_blank">萌ICP备20228421号</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://fastly.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'environment-8gzfnzxyeedc08e9',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'environment-8gzfnzxyeedc08e9',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://fastly.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !true) {
    if (true) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script defer data-pjax src="/js/kernel.js"></script><script defer data-pjax src="/js/tongji.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script src="//code.tidio.co/nwdy4oqyxwgfsh9wggjjluoe8qtkpdxp.js" async="async"></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()
</script><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://fastly.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://fastly.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><!-- hexo injector body_end start --><script data-pjax>
  function butterfly_swiper_injector_config(){
    var parent_div_git = document.getElementById('recent-posts');
    var item_html = '<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="db37c32a.html" alt=""><img width="48" height="48" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-03-23</span><a class="blog-slider__title" href="db37c32a.html" alt="">论文研读：《A Lightweight Graph Transformer Network for Human Mesh Reconstruction from 2D Human Pose》</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="db37c32a.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="a199460c.html" alt=""><img width="48" height="48" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-01-12</span><a class="blog-slider__title" href="a199460c.html" alt="">山东大学软件学院线性代数笔记</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="a199460c.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="8ae5cf92.html" alt=""><img width="48" height="48" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-01-09</span><a class="blog-slider__title" href="8ae5cf92.html" alt="">2021山东大学-HarmonyOS移动应用开发学习笔记</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="8ae5cf92.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="a1d74d45.html" alt=""><img width="48" height="48" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-03-07</span><a class="blog-slider__title" href="a1d74d45.html" alt="">TiDB知识速览</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="a1d74d45.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="d0daaef9.html" alt=""><img width="48" height="48" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-12-10</span><a class="blog-slider__title" href="d0daaef9.html" alt="">LaTeX安装教程（TexMaker+MiKTeX）</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="d0daaef9.html" alt="">详情   </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" href="3ae63a08.html" alt=""><img width="48" height="48" src="https://fastly.jsdelivr.net/npm/butterfly-extsrc@1/img/default.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2021-10-30</span><a class="blog-slider__title" href="3ae63a08.html" alt="">利用TF-IDF进行基于内容的推荐</a><div class="blog-slider__text">再怎么看我也不知道怎么描述它的啦！</div><a class="blog-slider__button" href="3ae63a08.html" alt="">详情   </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>';
    console.log('已挂载butterfly_swiper')
    parent_div_git.insertAdjacentHTML("afterbegin",item_html)
    }
  var elist = 'undefined'.split(',');
  var cpage = location.pathname;
  var epage = 'all';
  var flag = 0;

  for (var i=0;i<elist.length;i++){
    if (cpage.includes(elist[i])){
      flag++;
    }
  }

  if ((epage ==='all')&&(flag == 0)){
    butterfly_swiper_injector_config();
  }
  else if (epage === cpage){
    butterfly_swiper_injector_config();
  }
  </script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper_init.js"></script><script async src="//at.alicdn.com/t/font_2032782_8d5kxvn09md.js"></script><!-- hexo injector body_end end --></body></html>